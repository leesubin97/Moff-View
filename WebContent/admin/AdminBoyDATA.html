<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quixlab - Bootstrap Admin Dashboard Template by Themefisher.com</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <!-- Pignose Calender -->
    <link href="plugins/pg-calendar/css/pignose.calendar.min.css" rel="stylesheet">
    <!-- Chartist -->
    <link rel="stylesheet" href="plugins/chartist/css/chartist.min.css">
    <link rel="stylesheet" href="plugins/chartist-plugin-tooltips/css/chartist-plugin-tooltip.css">
    <!-- Custom Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <!-- chart -->
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    			<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    			
      <link rel="stylesheet" href="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.css">
<script src="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.js"></script>
<!--  https://apexcharts.com/ -->
 <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<style>
.pagination {
  display: inline-block;
}

.pagination a {
  color: black;
  float: left;
  padding: 8px 16px;
  text-decoration: none;
}

.pagination a.active {
  background-color: #4CAF50;
  color: white;
  border-radius: 5px;
}

.pagination a:hover:not(.active) {
  background-color: #ddd;
  border-radius: 5px;
}
</style>
<style type="text/css">


 body {
     background-color: #f9f9fa
 }

 .page-container {
     margin-bottom: 100px
 }

 .flex {
     -webkit-box-flex: 1;
     -ms-flex: 1 1 auto;
     flex: 1 1 auto
 }

 @media (max-width:991.98px) {
     .padding {
         padding: 1.5rem
     }
 }

 @media (max-width:767.98px) {
     .padding {
         padding: 1rem
     }
 }

 .padding {
     padding: 5rem
 }

 .card {
     background: #fff;
     border-width: 0;
     border-radius: .25rem;
     box-shadow: 0 1px 3px rgba(0, 0, 0, .05);
     margin-bottom: 1.5rem
 }

 .card {
     position: relative;
     display: flex;
     flex-direction: column;
     min-width: 0;
     word-wrap: break-word;
     background-color: #fff;
     background-clip: border-box;
     border: 1px solid rgba(19, 24, 44, .125);
     border-radius: .25rem
 }

 .card-header {
     padding: .75rem 1.25rem;
     margin-bottom: 0;
     background-color: rgba(19, 24, 44, .03);
     border-bottom: 1px solid rgba(19, 24, 44, .125)
 }

 .card-header:first-child {
     border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0
 }

 card-footer,
 .card-header {
     background-color: transparent;
     border-color: rgba(160, 175, 185, .15);
     background-clip: padding-box
 }
.card-title{

font-weight: 800

}

.sizeIMG{
	width: 450px;
	height: 500px;

}
</style>
</head>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10" />
            </svg>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    
    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        <div class="nav-header">
            <div class="brand-logo">
                <a href="index.html">
                    <b class="logo-abbr"><img src="images/logo.png" alt=""> </b>
                    <span class="logo-compact"><img src="./images/logo-compact.png" alt=""></span>
                    <span class="brand-title">
                        <img src="images/logo-text.png" alt="">
                    </span>
                </a>
            </div>
        </div>
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
            <div class="nav-header">
            <div class="brand-logo" style="margin: 20px 20px 20px 20px">
                    <span class="logo-compact"><img src="./images/1122.png" alt=""></span>
                    <span class="brand-title" style="font-size: 24px; color:white;">MOFF</span>
            </div>
        </div>
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
       <div class="nk-sidebar">           
            <div class="nk-nav-scroll">
                <ul class="metismenu" id="menu">
                    <li class="nav-label">관리자 페이지</li>
                     <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                           &ensp;<span class="nav-text">Home</span>
                        </a>
                    	<ul aria-expanded="false">
                            <li><a href="../index.html">Home</a></li>
                           
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-line-chart" style="font-size:20px"></i>&ensp;<span class="nav-text">매출관리</span>
                        </a>
                    	<ul aria-expanded="false">
                            <li><a href="newfile6.html">매출관리</a></li>
                           
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-pencil-square-o" style="font-size:20px">&ensp;</i><span class="nav-text">주문관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminSales.html">주문관리</a></li>
                          
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-line-chart" style="font-size:20px"></i>&ensp;<span class="nav-text">주문통계</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminProduct.html">주문통계</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-cog" style="font-size:20px">&ensp;</i><span class="nav-text">상품관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminProductWrite.html">상품등록</a></li>
                            <li><a href="adminProductList.html">상품리스트</a></li>
                            <li><a href="adminStockList.html">재고관리</a></li>
                                <li><a href="AdminAgeProduct.html">연령별 구매순위</a></li>
                            <!-- <li><a href="adminProduct.html">주문통계</a></li> -->
                        </ul>
                    </li>
                    
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                           <i class="fa fa-address-book-o" style="font-size:20px"></i>&ensp;<span class="nav-text">회원관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="AdminMember.html">회원관리</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                     <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-calendar-check-o" style="font-size:20px"></i>&ensp;<span class="nav-text">배달승인</span>
                        </a>
                        <ul aria-expanded="false">
                           <li><a href="AdminBoyDATA.html">배달승인</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <script type="text/javascript">
let urlParams = location.search.split(/[?&]/).slice(1).map(function(paramPair) {
    return paramPair.split(/=(.+)?/).slice(0, 2);
}).reduce(function(obj, pairArray) {
    obj[pairArray[0]] = pairArray[1];
    return obj;
}, {});
</script>
        <div class="content-body">

            <div class="container-fluid mt-3">
            
              

                <div class="row">
                        
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">배달원 신청서</h4>
                                    
                                    <table class="table table-hover appendTable">


									
									<tbody>	
									</tbody>
									
									</table>
                                  
                                  
                                </div>
                            </div>
                            
                          
                
                     
                      
                    </div>

                <div class="row">
                        
                            <div class="card" style="width: 500px">
                                <div class="card-body">
                                    <h4 class="card-title">라이더 결과 전송</h4>
                                    
                                    <div class="table-responsive" >
									<form method="post" id="smsForm">
									 
									   <table class="table table-bordered">
									   <tr class="table-info">
									    <th>라이더 지원자</th>
									     <td><input style="width: 200px" id="from" type="text" name="from" readonly="readonly"/></td>
									    </tr>
									    <tr class="table-info">
									    <th>결과 입력</th>
									     <td><textarea   style="width: 200px" id="text" name="text">안녕하세요. MOFF입니다. 배달 라이더지원이 승인되었습니다.</textarea></td>
									    <tr class="table-info">
									    <td colspan="2" align="center"> 
									     <input type="button" class="btn mb-1 btn-primary" onclick="sendSMS('sendSms')" value="전송하기" />
									    </td>
									    </tr>
									    </table>
									  </form>
									  </div>
									 
                                    
                                  
                                  
                                </div>
                            </div>
                            
                                  <div class="card" style="width: 350px"> 
                                <div class="card-body">
                                    <h4 class="card-title" style="margin-bottom: 70px">배달원 승인</h4>
                                    
                               
									  
									  <div  class="container" id="appendsignin">
										<button  class="btn mb-1 btn-primary" style="width: 250px" onclick = "golist()">회원관리 페이지로 이동</button>
									</div>
                                    
                                  
                                  
                                </div>
                            </div>
                            
                            
                          
                
                     
                      
                    </div>
            
          
          <script type="text/javascript">
          
          function golist() {
        		location.href="AdminMember.html";
        	}

          
          
          function sendSMS(pageName){

        	  
          	
          	$.ajax({
          		
          		url:"http://localhost:3000/sendSms",
          		type:'post',
          		data:{from:$("#from").val(), text:$("#text").val() },
          		success: function(dto) {
          			alert("승인여부 문자가 발송되었습니다.");
          			
          			
          		},
          		error:function(){
          			alert('error');
          		}
          	}); 
          	
          	
          	
          }
          
          
          
$(document).ready(function () {
	

	let memNum = urlParams.memNum;
	
	//memNum 넘어오는지 확인
	alert("memNum:" + memNum);
	
	 $.ajax({
		
		url:"http://localhost:3000/getdeliveryman",
		type:'post',
		data:{'memNum':memNum },
		success: function(dto) {
			//alert("success");
			
			let str = "<tr>"
						+ "<th>신청자 이름</th>" 
						+ "<td><p id='deliname'>" + dto.name + "</p></td>"
						
						+ "</tr>"
						
						
						+ "<tr>"
						+ "<th>아이디</th>" 
						+ "<td>" + dto.id + "</td>"
						+ "</tr>"
						
						
						+ "<tr>"
						+ "<th>비밀번호</th>" 
						+ "<td>" + dto.pwd + "</td>"
						+ "</tr>"
						
						+ "<tr>"
						+ "<th>닉네임</th>" 
						+ "<td>" + dto.nickname + "</td>"
						+ "</tr>"
						
						+"<tr>"
						+"<th>생년월일</th>"
						+"<td>" + dto.bdate + "</td>"
						+"</tr>"
						
						+"<tr>"
						+"<th>전화번호</th>"
						+"<td>" + dto.phone + "</td>"
						+"</tr>"
						
						+"<tr>"
						+"<th>이메일주소</th>"
						+"<td>" + dto.email + "</td>"
						+"</tr>"


						+"<tr>"
						+"<th>운전면허증</th>"
						+"<td><img class='sizeIMG' src='http://localhost:3000/delidata/" + dto.license +"'></td>"
						+ "</tr>"
						
						+"<tr>"
						+"<th>통장사본</th>"
						+"<td><img class='sizeIMG' src='http://localhost:3000/delidata/" + dto.bank +"'></td>"
						+ "</tr>"
						
						
						
						+"<tr>"
						+"<th>화물차 사용신고 필증, 자가용 화물차 사용신고증</th>"
						+"<td><img class='sizeIMG' src='http://localhost:3000/delidata/" + dto.carNum +"'></td>"
						+ "</tr>"
						
						$("#from").val(dto.phone);
						
						$(".appendTable").append(str);	
						//alert(dto.deliveryAdmi);
			var signbtn = "<button   class='btn mb-1 btn-primary' onclick = 'signin()'>승인하기</button>";			
				//승인이 안됬을떄만 버튼 표시	
				if(dto.deliveryAdmi == "" || dto.deliveryAdmi == 0){
						$("#appendsignin").append(signbtn);	
				}
				
				
			//배달 신청폼	
		},
		error:function(){
			alert('error');
		}
	}); 
	
	
});


function signin() {
	
	let memNum = urlParams.memNum;
	

	$.ajax({
		
		url:"http://localhost:3000/deliveryAdmi",
		type:"post",
		data:{'memNum':memNum },
		success: function(admi) {
			
			if(admi){
			
				alert("배달원으로 승인하였습니다");
				location.href="DeliveryAdmiList.html";
			}else{
				alert("승인이 되지않았습니다.");
			}
		},
		error:function(){
			alert("error");
		}
		
		
		
		
		
	});//ajax end
	
}
</script>
          
          
         
            </div>
            <!-- #/ container -->
        </div>
        <!--**********************************
            Content body end
        ***********************************-->
        
        
        <!--**********************************
            Footer start
        ***********************************-->
        <div class="footer">
            <div class="copyright">
                <p>Copyright &copy; Designed & Developed by <a href="https://themeforest.net/user/quixlab">관리자페이지</a> 2018</p>
            </div>
        </div>
        <!--**********************************
            Footer end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <script src="plugins/common/common.min.js"></script>
    <script src="js/custom.min.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/gleek.js"></script>
    <script src="js/styleSwitcher.js"></script>

    <!-- Chartjs -->
    <script src="plugins/chart.js/Chart.bundle.min.js"></script>
    <!-- Circle progress -->
    <script src="plugins/circle-progress/circle-progress.min.js"></script>
    <!-- Datamap -->
    <script src="plugins/d3v3/index.js"></script>
    <script src="plugins/topojson/topojson.min.js"></script>
    
    <!-- <script src="plugins/datamaps/datamaps.world.min.js"></script> -->
    <!-- Morrisjs -->
    <script src="plugins/raphael/raphael.min.js"></script>
    <script src="plugins/morris/morris.min.js"></script>
    <!-- Pignose Calender -->
    <script src="plugins/moment/moment.min.js"></script>
    <script src="plugins/pg-calendar/js/pignose.calendar.min.js"></script>
    <!-- ChartistJS -->
    <script src="plugins/chartist/js/chartist.min.js"></script>
    <script src="plugins/chartist-plugin-tooltips/js/chartist-plugin-tooltip.min.js"></script>



    <script src="js/dashboard/dashboard-1.js"></script>

</body>

</html>