<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quixlab - Bootstrap Admin Dashboard Template by Themefisher.com</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <!-- Pignose Calender -->
    <link href="./plugins/pg-calendar/css/pignose.calendar.min.css" rel="stylesheet">
    <!-- Chartist -->
    <link rel="stylesheet" href="./plugins/chartist/css/chartist.min.css">
    <link rel="stylesheet" href="./plugins/chartist-plugin-tooltips/css/chartist-plugin-tooltip.css">
    <!-- Custom Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css'>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js'></script>
   <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js'></script>
    <link rel="stylesheet" href="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.css">
<script src="https://rawgit.com/gionkunz/chartist-js/master/dist/chartist.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<style type="text/css">
 .flex {
     -webkit-box-flex: 1;
     -ms-flex: 1 1 auto;
     flex: 1 1 auto
 }

 @media (max-width:991.98px) {
     .padding {
         padding: 1.5rem
     }
 }

 @media (max-width:767.98px) {
     .padding {
         padding: 1rem
     }
 }

 .padding {
     padding: 5rem
 }

 .card {
     background: #fff;
     border-width: 0;
     border-radius: .25rem;
     box-shadow: 0 1px 3px rgba(0, 0, 0, .0);
     margin-bottom: 1.5rem
 }

 .card {
     position: relative;
     display: flex;
     flex-direction: column;
     min-width: 0;
     word-wrap: break-word;
     background-color: #fff;
     background-clip: border-box;
  
     border-radius: .25rem
 }

 .card-header {
     padding: .75rem 1.25rem;
     margin-bottom: 0;
     background-color: rgba(19, 24, 44, .03);
 
 }

 .card-header:first-child {
     border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0
 }

 card-footer,
 .card-header {
     background-color: transparent;
     border-color: rgba(160, 175, 185, .15);
     background-clip: padding-box
 }


</style>



</head>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10" />
            </svg>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    
    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        <div class="nav-header">
            <div class="brand-logo">
                <a href="index.html">
                    <b class="logo-abbr"><img src="images/logo.png" alt=""> </b>
                    <span class="logo-compact"><img src="./images/logo-compact.png" alt=""></span>
                    <span class="brand-title">
                        <img src="images/logo-text.png" alt="">
                    </span>
                </a>
            </div>
        </div>
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
        <div class="nav-header">
            <div class="brand-logo" style="margin: 20px 20px 20px 20px">
                    <span class="logo-compact"><img src="./images/1122.png" alt=""></span>
                    <span class="brand-title" style="font-size: 24px; color:white;">MOFF</span>
            </div>
        </div>
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
       <div class="nk-sidebar">           
            <div class="nk-nav-scroll">
                <ul class="metismenu" id="menu">
                    <li class="nav-label">관리자 페이지</li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-line-chart" style="font-size:20px"></i>&ensp;<span class="nav-text">매출관리</span>
                        </a>
                    	<ul aria-expanded="false">
                            <li><a href="newfile6.html">매출관리</a></li>
                           
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-pencil-square-o" style="font-size:20px">&ensp;</i><span class="nav-text">주문관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminSales.html">주문관리</a></li>
                          
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-line-chart" style="font-size:20px"></i>&ensp;<span class="nav-text">주문통계</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminProduct.html">주문통계</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-cog" style="font-size:20px">&ensp;</i><span class="nav-text">상품관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="adminProductWrite.html">상품등록</a></li>
                            <li><a href="adminProductList.html">상품리스트</a></li>
                            <li><a href="adminStockList.html">재고관리</a></li>
                            <!-- <li><a href="adminProduct.html">주문통계</a></li> -->
                        </ul>
                    </li>
                    
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                           <i class="fa fa-address-book-o" style="font-size:20px"></i>&ensp;<span class="nav-text">회원관리</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="AdminMember.html">회원관리</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                     <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="fa fa-calendar-check-o" style="font-size:20px"></i>&ensp;<span class="nav-text">배달승인</span>
                        </a>
                        <ul aria-expanded="false">
                           <li><a href="AdminBoyDATA.html">배달승인</a></li>
                            <!-- <li><a href="./app-calender.html">배달승인</a></li> -->
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">
            <div class="container-fluid ">
                <div class="row">
                
                
              <!--   카테고리별 주문건수  -->
                            <div class="col-lg-6">
								<div class="card">
									        <div class="row">
									            <div class="container-fluid d-flex justify-content-center" style="height: 600px">
									                        <div class="card-body">
									                            <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
									                                <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
									                                    <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
									                                </div>
									                                
									                                
									                                <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
									                                    <div style="position:absolute;width:200%;height:200%;left:0; top:0; "></div>
									                                </div>
									                            </div> <canvas id="chart-line" width="400" height="200" class="chartjs-render-monitor" style="display: block; width: 500px; height: 200px;"></canvas>
									                        </div>
									        		</div>
									 		  </div>
				               			 </div>
								  </div>

				<!-- 	상품별 주문건수 	 -->  
                  <div class="col-lg-6">
                     <div class="card">
						 <div class="row">
						 <div class="container-fluid d-flex justify-content-center" style="height: 600px">
		           
		                        <div class="card-body" >
		                            <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
		                                <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
		                                    <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
		                                </div>
		                                <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
		                                    <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
		                                </div>
		                            </div> <canvas id="chart-line2" width="400" height="200" class="chartjs-render-monitor" style="display: block; width: 500px; height: 200px;"></canvas>
		                  
             					   </div>
         						   </div>
				                    </div>
				                </div>
						  </div>
					 </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body" style="text-align: center">
                            	 <h4 style="color:#76838f; margin-bottom: 40px; margin-top: 20px"><b>상품별 조회수 순위 </b></h4>
                                <div class="active-member">
                                    <div class="table-responsive">
                                        <table class="table table-xs mb-0">
                                            <thead>
                                                <tr style="text-align: center">
                                                    <th>상품번호</th>
                                                    <th>카테고리</th>
                                                    <th>상품이름</th>
                                                    <th>가격</th>
                                                    <th>조회수</th>
                                                    <th>비율</th>
                                                 
                                                </tr>
                                            </thead>
                                            <tbody id="rclist" style="text-align: center">
                                            
                           			        <!-- 리스트 들어가는곳  -->         
                                         
                                    
                                              
                                            </tbody>
                                        </table>
                                    </div>
                                    		<!-- <div class="container" >
											<nav aria-label="Page navigation" style="text-align: center">
												<ul class="pagination" id="pagination" style="justify-content:center" >
												
												</ul>
											</nav>
										</div>  -->
                                </div>
                            </div>
                        </div>                        
                    </div>
                </div>







            </div>
            <!-- #/ container -->
        </div>
        <!--**********************************
            Content body end
        ***********************************-->
        
        
        <!--**********************************
            Footer start
        ***********************************-->
        <div class="footer">
            <div class="copyright">
                <p>Copyright &copy; Designed & Developed by <a href="https://themeforest.net/user/quixlab">Quixlab</a> 2018</p>
            </div>
        </div>
        <!--**********************************
            Footer end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    
<script type="text/javascript">
getChart();
productChart();

/////////////////////////// chart (카테고리별) ///////////////////////////////

function getChart() {
	$.ajax({
		url:"http://localhost:3000/catelist",
		type:"get",
		success:function(list){	
			
		//	alert(JSON.stringify(list));
			var category = new Array();
			var count = new Array();
			
			
			
    		$.each(list, function(i, val){
    			
    			category.push( val.category );
    			count.push( val.odCount );
				
    		});
    	//	alert(count);
			   var ctx = $("#chart-line");
		       var myLineChart = new Chart(ctx, {
		            type: 'doughnut',
		            data: {
		                labels: category,
		                datasets: [{
		                    data: count,
		                    backgroundColor: ["#424874", "#a6b1e1", "#dcd6f7", "#f4eeff","#edeef7"]
		                }]
		            },
		            options: {
		                title: {
		                    display: true,
		                    text: '카테고리별 주문건수'
		                }
		            }
		        });
		},
		error:function(){
			alert("error");
		}
	
		 });//ajax
}

/////////////////////////// chart (상품별) ///////////////////////////////

function productChart() {
	$.ajax({
		url:"http://localhost:3000/prodlist",
		type:"get",
		success:function(list){	
			
		//	alert(JSON.stringify(list));
		 	var prodname = new Array();
			var count = new Array();
			
    		$.each(list, function(i, val){
    			
    			prodname.push( val.prodName );
    			count.push( val.odCount );

    		})

    	//	alert(prodname);
    	//	alert(count);
    		
    	 
    		 var ctx = $("#chart-line2");
            var myLineChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: prodname,
                    datasets: [{
                        data: count,
                        label: "주문수",
                        borderColor: "#424874",
                        backgroundColor: '#424874',
                        fill: false
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: '상품별 주문건수 '
                    },
                	legend: { display: false },
                	   scales: {
                		   xAxes: [{
                	            gridLines: {
                	                color: "rgba(0, 0, 0, 0)",
                	            }
                	        }],
	               			yAxes: [{
	               			   gridLines: {
	                               color: "rgba(0, 0, 0, 0)",
	                           },
	               				ticks: {
	               					min:0,
	               					fontSize : 10,
	               				},
               			}]
               		}
                }
            });
		},
		error:function(){
			alert("error");
		}
	
		 });//ajax
}







var totalview;
rCount();
mainRcList();



// 조회수순 상품 리스트 
function mainRcList() {
	
	$.ajax({
		url:'http://localhost:3000/mainRcList',
		type:'get',
		data:{},
		success:function(list){
	//	alert('success');
	//	alert(JSON.stringify(list));

	 	 $.each(list, function(i, val) {
	
			let data = val.price; 
			let srprice = String(data).replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,');
			
			let readcount = val.readCount;
			
		
				
	 		 let str = "<tr>"
					 + "<td>"	 		 
					 + "<span><a href ='../product/productDetail.html?prodNum=" + val.prodNum + "'>" + val.prodNum + "</a></span>"	 		 
					 + "</td>"	 		 
	 		 		 + "<td><a href ='../product/productDetail.html?prodNum=" + val.prodNum + "'>" + val.category + "</a></td>"
	 		 		 + "<td><a href ='../product/productDetail.html?prodNum=" + val.prodNum + "'><img src='../images/" + val.filename + "' class=' rounded-circle mr-3' >" + val.prodName + "</a></td>"	
	 		 		 + "<td>" + srprice + "원</td>"
					 + "<td><p style='color:#424874'><b>" + val.readCount + "</b></p></td>"	
					 + "<td>"	
					 + "<div>"
					 + "<div class='progress' style='height: 6px' id='total'>"
					 + "<div class='progress-bar' style='width: " + (readcount/totalview*100) + "%; background-color: #a6b1e1'></div>"
					 + "</div>"
					 + "</div>"
					 + "</td>"	
	 		 		 + "</tr>";

				$("#rclist").append(str);

			})
			
		}, 
		error:function(){
			alert('error');
		}
	});
}



///////////////////  총조회수  /////////////
function rCount() {
	
	$.ajax({
		url:'http://localhost:3000/rCount',
		type:'get',
		success:function(rcount){
	//	alert('success');
	//	alert(JSON.stringify(rcount));

			totalview = rcount;

			
		}, 
		error:function(){
			alert('error');
		}
	});
}




  


 
</script>





















    
    
 
 
 
 
 
 
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <script src="plugins/common/common.min.js"></script>
    <script src="js/custom.min.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/gleek.js"></script>
    <script src="js/styleSwitcher.js"></script>

      <!-- <!—-  flot-chart js -—> -->
    <script src="./plugins/flot/js/jquery.flot.min.js"></script>
    <script src="./plugins/flot/js/jquery.flot.pie.js"></script>
    <script src="./plugins/flot/js/jquery.flot.resize.js"></script>
    <script src="./plugins/flot/js/jquery.flot.spline.js"></script>
    <script src="./plugins/flot/js/jquery.flot.init.js"></script>
  

    <script src="./js/dashboard/dashboard-1.js"></script>

</body>

</html>